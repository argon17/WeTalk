(this.webpackJsonpwetalk=this.webpackJsonpwetalk||[]).push([[0],{123:function(e,t,a){},124:function(e,t,a){},137:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),i=a(15),o=a.n(i),s=(a(123),a(11)),l=(a(124),a(174)),r=a(38),d=a(177),j=a(27),u=(a(125),a(139),a(140),j.a.initializeApp({apiKey:"AIzaSyBIrIcDMj0X9oM7Xd8KOJ8tpny2SyQDbeA",authDomain:"wetalk-argon17.firebaseapp.com",databaseURL:"https://wetalk-argon17-default-rtdb.firebaseio.com",projectId:"wetalk-argon17",storageBucket:"wetalk-argon17.appspot.com",messagingSenderId:"473443794549",appId:"1:473443794549:web:aa9948674228b39bce823c"}).firestore()),b=j.a.auth(),h=j.a.storage(),m=new j.a.auth.GoogleAuthProvider,g=a.p+"static/media/identity.65d2315c.png",p=a(3),O=Object(l.a)((function(e){return{main:{height:"100vh",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},lgn_btn:{width:e.spacing(20),margin:e.spacing(5),borderRadius:"180px"},main_text:{fontWeight:"bold"},avatar:{height:25,objectFit:"contain"},info:{display:"flex",right:40,marginTop:e.spacing(20)}}})),f=function(){var e=O();return Object(p.jsxs)("div",{className:e.main,children:[Object(p.jsx)(r.a,{className:e.main_text,variant:"h2",children:"Welcome to WeTalk"}),Object(p.jsx)(d.a,{color:"primary",variant:"contained",className:e.lgn_btn,onClick:function(){b.signInWithPopup(m).then((function(e){})).catch((function(e){console.log(e)}))},children:"Get Started"}),Object(p.jsxs)("div",{className:e.info,children:[Object(p.jsx)(r.a,{variant:"h6",color:"inherit",children:"Developed and designed by argon \xa0"}),Object(p.jsx)("a",{href:"https://github.com/argon17",children:Object(p.jsx)("img",{src:g,className:e.avatar,alt:"argon"})})]})]})},x=a(26),v=a(197),y=a(206),N=a(185),S=a(198),C=a(205),k=a(106),w=a(194),I=a(199),D=a(103),L=a(200),U=a(204),_=a(207),F=a(101),P=a.n(F),R=a.p+"static/media/logo.ecea2523.png",B=a(102),A=Object(B.a)({overrides:{MuiCssBaseline:{"@global":{body:{background:"linear-gradient(to right, #0f2027, #203a43, #2c5364)",backgroundRepeat:"no-repeat",backgroundAttachment:"fixed"}}}},palette:{type:"dark",primary:{main:"#2C5364"},secondary:{main:"#ffffff"}},typography:{fontFamily:"Ubuntu"}}),M=a(178),T=a(183),E=a(180),W=a(179),J=a(202),z=function(e){var t=e.create,a=e.toggle,c=Object(n.useState)(!0),i=Object(s.a)(c,2),o=i[0],l=i[1],r=Object(n.useState)(""),j=Object(s.a)(r,2),u=j[0],b=j[1];function h(){l(!1),a()}return Object(p.jsx)("div",{children:Object(p.jsxs)(M.a,{onClose:h,PaperProps:{style:{background:"linear-gradient(to right, #0f2027, #203a43, #2c5364)",boxShadow:"none"}},open:o,children:[Object(p.jsx)(W.a,{children:"Add Channel"}),Object(p.jsx)(E.a,{children:Object(p.jsx)(J.a,{fullWidth:!0,label:"Channel Name",margin:"dense",name:"cName",onChange:function(e){b(e.target.value)},value:u})}),Object(p.jsxs)(T.a,{children:[Object(p.jsx)(d.a,{color:"secondary",onClick:h,children:"Cancel"}),Object(p.jsx)(d.a,{color:"default",onClick:function(e){return function(e){e.preventDefault(),u&&(t(u),a())}(e)},variant:"outlined",children:"Add Channel"})]})]})})},G=a(184),V=a(143),q=a(186),H=a(187),K=a(182),X=a(18),Y=a(94),Q=a.n(Y),Z=a(93),$=a.n(Z),ee=Object(l.a)((function(e){return{addChannelButton:{margin:e.spacing(2)},list_item:{paddingLeft:e.spacing(5),boxShadow:"1px 1px black"}}})),te=function(e){var t=e.user,a=Object(n.useState)(!1),c=Object(s.a)(a,2),i=c[0],o=c[1],l=Object(n.useState)([]),r=Object(s.a)(l,2),b=r[0],h=r[1],m=Object(X.f)(),g=ee(),O=function(){o(!i)};return Object(n.useEffect)((function(){t&&u.collection("users").doc(t).onSnapshot((function(e){h(e.data().channels.map((function(e,t){return{channelName:e.channelName,id:e.id}})))}))}),[t]),Object(p.jsxs)("div",{children:[i?Object(p.jsx)(z,{create:function(e){if(e){console.log(e);var a=[];a.push(t),u.collection("channels").add({channelName:e,members:a}).then((function(a){var n={channelName:e,id:a.id};console.log("added new channel",a.id),u.collection("users").doc(t).update({channels:j.a.firestore.FieldValue.arrayUnion(n)})})).then((function(e){console.log(e)}))}},toggle:O}):null,Object(p.jsx)(d.a,{className:g.addChannelButton,color:"primary",endIcon:Object(p.jsx)(G.a,{}),onClick:O,variant:"contained",children:"Add Channel"}),Object(p.jsx)(N.a,{}),Object(p.jsxs)(V.a,{className:g.list_item,button:!0,onClick:function(e){m.push("/")},children:[Object(p.jsx)(q.a,{children:Object(p.jsx)($.a,{})}),Object(p.jsx)(H.a,{children:"Home"})]}),Object(p.jsx)(K.a,{component:"div",disablePadding:!0,children:b.map((function(e){return Object(p.jsxs)(V.a,{button:!0,onClick:function(){return t=e.id,void m.push("/channel/".concat(t));var t},className:g.list_item,children:[Object(p.jsx)(q.a,{children:Object(p.jsx)(Q.a,{})}),Object(p.jsx)(H.a,{primary:e.channelName})]},e.id)}))})]})},ae=function(e){var t=e.toggle,a=e.alert,i=c.a.useState(!0),o=Object(s.a)(i,2),l=o[0],r=o[1],j=Object(n.useState)(""),b=Object(s.a)(j,2),h=b[0],m=b[1],g=Object(n.useState)(""),O=Object(s.a)(g,2),f=O[0],x=O[1],v=Object(n.useState)(""),y=Object(s.a)(v,2),N=y[0],S=y[1],C=Object(n.useState)(""),k=Object(s.a)(C,2),w=k[0],I=k[1];function D(){r(!1),t()}Object(n.useEffect)((function(){var e=JSON.parse(localStorage.getItem("userDetails"));m(e.name),x(e.displayName),S(e.email),I(e.uid)}),[]);return Object(p.jsx)("div",{children:Object(p.jsxs)(M.a,{onClose:D,PaperProps:{style:{background:"linear-gradient(to right, #0f2027, #203a43, #2c5364)",boxShadow:"none"}},open:l,children:[Object(p.jsx)(W.a,{children:"Edit Profile"}),Object(p.jsxs)(E.a,{children:[Object(p.jsx)(J.a,{fullWidth:!0,label:"Display Name",margin:"dense",name:"displayName",onChange:function(e){x(e.target.value)},value:f}),Object(p.jsx)(J.a,{fullWidth:!0,disabled:!0,label:"Email",margin:"dense",name:"email",value:N}),Object(p.jsx)(J.a,{fullWidth:!0,disabled:!0,margin:"dense",label:"Name",name:"name",value:h})]}),Object(p.jsxs)(T.a,{children:[Object(p.jsx)(d.a,{color:"secondary",onClick:D,children:"Cancel"}),Object(p.jsx)(d.a,{color:"default",onClick:function(){u.collection("users").doc(w).update({displayName:f}).then((function(e){a()})).catch((function(e){console.log(e)})),r(!1),t()},variant:"outlined",children:"Update"})]})]})})},ne=a(100),ce=a.n(ne),ie=a(43),oe=a(188),se=a(189),le=a(190),re=a(191),de=Object(l.a)((function(e){return{container:{margin:e.spacing(5),padding:e.spacing(3),boxShadow:"0px 3px 4px -1px rgb(0 0 0 / 17%), 0px 1px 1px 0px rgb(0 0 0 / 14%), 0px 1px 3px 0px rgb(0 0 0 / 92%)",color:"rgb(220, 221, 222)"}}})),je=function(){var e=de();return Object(p.jsxs)("div",{className:e.container,children:[Object(p.jsx)(r.a,{variant:"h4",children:"Welcome to WeTalk"}),Object(p.jsx)(r.a,{variant:"h6",children:"Let's Communicate !!"})]})},ue=Object(l.a)((function(e){return{content:{display:"flex",justifyContent:"space-between",background:"linear-gradient(to right, rgba(72, 85, 99, 0.5), rgba(41, 50, 60, 0.5))"},card_container:{padding:e.spacing(2)},card:Object(x.a)({display:"flex"},e.breakpoints.up("sm"),{height:e.spacing(30)}),channel_avatar:{height:e.spacing(10),width:e.spacing(10),backgroundColor:e.palette.primary.main,fontSize:"2rem",color:"#ffffff"},channel_name:{paddingTop:e.spacing(5)},container:{display:"flex",flexDirection:"column",alignItems:"center"}}})),be=function(e){var t=e.user,a=Object(n.useState)([]),c=Object(s.a)(a,2),i=c[0],o=c[1],l=ue(),d=Object(X.f)();Object(n.useEffect)((function(){u.collection("users").doc(t).onSnapshot((function(e){o(e.data().channels.map((function(e,t){return{channelName:e.channelName,id:e.id}})))}))}),[t]);return Object(p.jsxs)("div",{children:[Object(p.jsx)(je,{}),i.length>0?Object(p.jsx)(oe.a,{container:!0,children:i.map((function(e){return Object(p.jsx)(oe.a,{item:!0,xs:6,md:3,className:l.card_container,children:Object(p.jsx)(se.a,{className:l.content,variant:"outlined",children:Object(p.jsx)(le.a,{className:l.card,onClick:function(){return t=e.id,void d.push("/channel/".concat(t));var t},children:Object(p.jsxs)(re.a,{className:l.container,children:[Object(p.jsx)(y.a,{variant:"square",className:l.channel_avatar,children:e.channelName.substr(0,1).toUpperCase()}),Object(p.jsx)(r.a,{className:l.channel_name,children:e.channelName})]})})})},e.id)}))}):Object(p.jsx)("div",{children:Object(p.jsxs)(r.a,{children:["Seems, there are no channels.",Object(p.jsx)("br",{}),"Create a channel first."]})})]})},he=a(95),me=a(193),ge=a(195),pe=a(96),Oe=a.n(pe),fe=a(192),xe=Object(l.a)((function(e){return{thumbnail:{width:e.spacing(40),objectFit:"contain"}}})),ve=function(e){var t=e.msgId,a=e.text,c=e.deleteMsg,i=e.handleDialog,o=e.postImg,l=Object(n.useState)(!0),r=Object(s.a)(l,2),j=r[0],u=r[1],b=xe(),h=function(){u(!1),i()};return Object(p.jsx)("div",{children:Object(p.jsxs)(M.a,{open:j,PaperProps:{style:{background:"linear-gradient(to right, #0f2027, #203a43, #2c5364)",boxShadow:"none"}},onClose:h,children:[Object(p.jsx)(W.a,{children:" Delete Message ? "}),Object(p.jsxs)(E.a,{children:[Object(p.jsx)(fe.a,{children:a}),o&&Object(p.jsx)("img",{src:o,alt:"post_img",className:b.thumbnail})]}),Object(p.jsxs)(T.a,{children:[Object(p.jsx)(d.a,{onClick:h,children:"Cancel"}),Object(p.jsx)(d.a,{onClick:function(){c(t),i()},color:"primary",autoFocus:!0,variant:"contained",children:"Delete"})]})]})})},ye=Object(l.a)((function(e){var t;return{container:{background:"linear-gradient(to right, rgba(72, 85, 99, 0.5), rgba(41, 50, 60, 0.5))","&:hover":{background:"linear-gradient(to right, rgba(70, 87, 98, 0.9), rgba(40, 51, 61, 0.9))"}},header:{textAlign:"left"},text:{textAlign:"left",marginLeft:e.spacing(5),color:"white"},media:{marginTop:e.spacing(2)},post_img:(t={},Object(x.a)(t,e.breakpoints.up("sm"),{width:e.spacing(80)}),Object(x.a)(t,"width",e.spacing(40)),Object(x.a)(t,"objectFit","contain"),t)}})),Ne=function(e){var t=e.values,a=e.msgId,c=ye(),i=JSON.parse(localStorage.getItem("userDetails")).uid,o=t.uid,l=t.timestamp.toDate(),d=l.getDate().toString();d=d.length<2?"0"+d:d;var j=l.getFullYear(),b=(l.getMonth()+1).toString();b=b.length<2?"0"+b:b;var h=l.getHours().toString();h=h.length<2?"0"+h:h;var m=l.getMinutes().toString();m=m.length<2?"0"+m:m;var g="".concat(d,"/").concat(b,"/").concat(j,"   ").concat(h,":").concat(m),O=t.postImg,f=Object(X.g)().id,x=Object(n.useState)(!1),v=Object(s.a)(x,2),N=v[0],S=v[1],C=function(){S(!N)};return Object(p.jsxs)("div",{children:[N&&Object(p.jsx)(ve,{msgId:a,text:t.text,postImg:O,deleteMsg:function(e){u.collection("channels").doc(f).collection("messages").doc(e).delete().then((function(e){console.log("deleted successfully")})).catch((function(e){console.log(e)}))},handleDialog:C}),Object(p.jsxs)(se.a,{className:c.container,children:[Object(p.jsx)(me.a,{avatar:Object(p.jsx)(y.a,{"aria-label":"user-pic",className:c.avatar,alt:t.userName,src:t.userImg}),action:Object(p.jsx)(w.a,{"aria-label":"delete",onClick:C,children:i===o&&Object(p.jsx)(Oe.a,{})}),title:t.userName,subheader:g,className:c.header}),Object(p.jsxs)(re.a,{children:[Object(p.jsx)(r.a,{variant:"body2",color:"textSecondary",component:"p",className:c.text,children:t.text}),O&&Object(p.jsx)(ge.a,{className:c.media,title:"post_img",children:Object(p.jsx)("img",{src:O,alt:"post_img",className:c.post_img})})]})]})]})},Se=a(97),Ce=a.n(Se),ke=a(99),we=a.n(ke),Ie=a(98),De=a.n(Ie),Le=a(203),Ue=a(196),_e=Object(l.a)((function(e){return{thumbnail:{width:e.spacing(40),objectFit:"contain"}}})),Fe=function(e){var t=e.setState,a=e.file,c=_e(),i=Object(n.useState)(!0),o=Object(s.a)(i,2),l=o[0],b=o[1],m=Object(n.useState)(""),g=Object(s.a)(m,2),O=g[0],f=g[1],x=Object(n.useState)(0),v=Object(s.a)(x,2),y=v[0],N=v[1],S=Object(n.useState)({display:"none"}),C=Object(s.a)(S,2),k=C[0],w=C[1],I=Object(X.g)(),D=function(){b(!1),t()},L=function(e){e.preventDefault(),w({display:"block"});var t=h.ref("images/".concat(a.name)).put(a);t.on("state_changed",(function(e){var t=e.bytesTransferred/e.totalBytes*100;N(t)}),(function(e){console.log(e)}),(function(){t.snapshot.ref.getDownloadURL().then((function(e){!function(e){if(I.id){var t=JSON.parse(localStorage.getItem("userDetails"));if(t){var a=t.displayName,n=t.imgURL,c=t.uid,i=e,o={text:O,timestamp:j.a.firestore.Timestamp.now(),userImg:n,userName:a,uid:c,postImg:i};u.collection("channels").doc(I.id).collection("messages").add(o).then((function(e){console.log("message sent")})).catch((function(e){console.log(e)}))}f("")}}(e)})),D()}))},U=URL.createObjectURL(a);return Object(p.jsx)("div",{children:Object(p.jsxs)(M.a,{onClose:D,PaperProps:{style:{background:"linear-gradient(to right, #0f2027, #203a43, #2c5364)",boxShadow:"none"}},open:l,children:[Object(p.jsx)(W.a,{children:"Upload Image"}),Object(p.jsxs)(E.a,{children:[Object(p.jsxs)("form",{autoComplete:"off",onSubmit:function(e){L(e)},children:[Object(p.jsx)("img",{alt:"user_file",src:U,className:c.thumbnail}),Object(p.jsx)(J.a,{fullWidth:!0,label:"Add Caption",margin:"dense",name:"caption",onChange:function(e){f(e.target.value)},value:O})]}),Object(p.jsx)("div",{style:k,children:Object(p.jsxs)(Le.a,{display:"flex",alignItems:"center",children:[Object(p.jsx)(Le.a,{width:"100%",mr:1,children:Object(p.jsx)(Ue.a,{variant:"determinate",value:y})}),Object(p.jsx)(Le.a,{minWidth:35,children:Object(p.jsxs)(r.a,{variant:"body2",children:[Math.round(y),"%"]})})]})})]}),Object(p.jsxs)(T.a,{children:[Object(p.jsx)(d.a,{color:"secondary",onClick:D,children:"Cancel"}),Object(p.jsx)(d.a,{autoFocus:!0,type:"submit",color:"default",onClick:function(e){return L(e)},variant:"outlined",children:"Upload"})]})]})})},Pe=Object(l.a)((function(e){return{inputFile:{display:"none"},footer:Object(x.a)({},e.breakpoints.up("sm"),{paddingRight:e.spacing(2),paddingLeft:e.spacing(2)}),footerContent:{display:"flex",backgroundColor:e.palette.primary.main,alignItems:"center",borderRadius:"5px"},form:{display:"flex",width:"100%"},chat:Object(x.a)({position:"relative",height:"calc(100vh - 150px)",paddingBottom:e.spacing(2)},e.breakpoints.up("sm"),{paddingRight:e.spacing(2),paddingLeft:e.spacing(2)}),channel_name:{backgroundColor:"#2C5364"},empty:{color:"grey",margin:e.spacing(10)}}})),Re=function(){var e=Pe(),t=Object(X.g)(),a=Object(X.f)(),c=Object(n.useState)([]),i=Object(s.a)(c,2),o=i[0],l=i[1],d=Object(n.useState)(""),b=Object(s.a)(d,2),h=b[0],m=b[1],g=Object(n.useState)(""),O=Object(s.a)(g,2),f=O[0],x=O[1],v=Object(n.useState)(!1),y=Object(s.a)(v,2),N=y[0],S=y[1],C=Object(n.useState)(null),k=Object(s.a)(C,2),I=k[0],D=k[1];Object(n.useEffect)((function(){var e=JSON.parse(localStorage.getItem("userDetails"));if(t.id&&e){var a=e.uid,n=e.channels;u.collection("channels").doc(t.id).onSnapshot((function(e){e.data()&&m(e.data().channelName)})),u.collection("channels").doc(t.id).collection("messages").orderBy("timestamp","asc").onSnapshot((function(e){l(e.docs.map((function(e){return{id:e.id,data:e.data()}})))})),-1===n.indexOf(t.id)&&u.collection("channels").doc(t.id).get().then((function(e){if(e.exists){var n={channelName:e.data().channelName,id:t.id};u.collection("users").doc(a).update({channels:j.a.firestore.FieldValue.arrayUnion(n)}),u.collection("channels").doc(t.id).update({members:j.a.firestore.FieldValue.arrayUnion(a)})}else console.log("No such document!")})).catch((function(e){console.log("Error getting document:",e)}))}}),[t,a]);var L=function(){S(!N)};return Object(p.jsxs)("div",{children:[N&&Object(p.jsx)(Fe,{setState:L,file:I}),Object(p.jsx)(oe.a,{item:!0,xs:12,className:e.channel_name,children:Object(p.jsx)(r.a,{children:h})}),Object(p.jsx)(oe.a,{item:!0,xs:12,className:e.chat,children:Object(p.jsx)(he.a,{children:o.length>0?o.map((function(e){return Object(p.jsx)(Ne,{values:e.data,msgId:e.id},e.id)})):Object(p.jsxs)(r.a,{className:e.empty,children:["Add People. Start Chatting :)",Object(p.jsx)("br",{}),"You can add people using the URL of this chat."]})})}),Object(p.jsx)("div",{className:e.footer,children:Object(p.jsxs)(oe.a,{item:!0,xs:12,className:e.footerContent,children:[Object(p.jsx)("input",{accept:"image/*",id:"input-file",className:e.inputFile,type:"file",onChange:function(e){return function(e){e.preventDefault(),e.target.files[0]&&(D(e.target.files[0]),L()),e.target.value=null}(e)}}),Object(p.jsx)("label",{htmlFor:"input-file",children:Object(p.jsx)(w.a,{"aria-label":"upload picture",component:"span",children:Object(p.jsx)(Ce.a,{})})}),Object(p.jsx)(w.a,{component:"button",children:Object(p.jsx)(De.a,{})}),Object(p.jsxs)("form",{autoComplete:"off",onSubmit:function(e){return function(e){if(e.preventDefault(),f&&t.id){var a=JSON.parse(localStorage.getItem("userDetails"));if(a){var n=a.displayName,c=a.imgURL,i=a.uid,o={text:f,timestamp:j.a.firestore.Timestamp.now(),userImg:c,userName:n,uid:i,postImg:null};u.collection("channels").doc(t.id).collection("messages").add(o).then((function(e){console.log("message sent")})).catch((function(e){console.log(e)}))}x("")}}(e)},className:e.form,children:[Object(p.jsx)(J.a,{required:!0,autoFocus:!0,fullWidth:!0,multiline:!0,rows:1,rowsMax:1,value:f,onChange:function(e){x(e.target.value)},margin:"normal",placeholder:"Enter Message"}),Object(p.jsx)(w.a,{type:"submit",component:"button",children:Object(p.jsx)(we.a,{})})]})]})})]})},Be=function(){var e=Object(n.useState)(null),t=Object(s.a)(e,2),a=t[0],c=t[1];Object(n.useEffect)((function(){a||i(),b.onAuthStateChanged((function(e){e?(u.collection("users").doc(e.uid).get().then((function(t){if(t.exists)console.log("user already exists.");else{var a={name:e.displayName,displayName:e.displayName.split(" ")[0],imgURL:e.photoURL,email:e.email,uid:e.uid,channels:[]};u.collection("users").doc(e.uid).set(a).then((function(e){console.log("new user created")})).catch((function(e){console.log(e)}))}})).catch((function(e){console.log(e)})),c(e.uid)):c(null)}))}),[a]);var i=function(){b.signInWithPopup(m).then((function(e){})).catch((function(e){console.log(e)}))};return Object(p.jsx)("div",{children:a?Object(p.jsx)("div",{children:"you need to login"}):Object(p.jsx)("div",{children:"already logged in"})})},Ae=300,Me=Object(l.a)((function(e){var t;return{logo:{height:50,objectFit:"contain"},avatar:{height:25,objectFit:"contain"},header:{display:"flex",justifyContent:"space-between",alignItems:"center",flexGrow:1},root:{display:"flex"},drawer:Object(x.a)({},e.breakpoints.up("sm"),{width:Ae,flexShrink:0}),appBar:Object(x.a)({},e.breakpoints.up("sm"),{width:"calc(100% - ".concat(Ae,"px)"),marginLeft:Ae}),menuButton:Object(x.a)({marginRight:e.spacing(2)},e.breakpoints.up("sm"),{display:"none"}),toolbar:e.mixins.toolbar,drawerPaper:{width:Ae,background:"linear-gradient(to right, #0f2027, #203a43, #2c5364)",color:"white"},content:(t={marginTop:"64px"},Object(x.a)(t,e.breakpoints.up("sm"),{width:"calc(100% - ".concat(Ae,"px)")}),Object(x.a)(t,"width","100%"),t),menu:{"& .MuiPaper-root":{backgroundColor:e.palette.primary.main}}}})),Te=function(e){var t=e.window,a=e.uid,i=Me(),o=Object(n.useState)([]),l=Object(s.a)(o,2),d=l[0],j=l[1],h=Object(n.useState)(!1),m=Object(s.a)(h,2),g=m[0],O=m[1],f=c.a.useState(!1),x=Object(s.a)(f,2),F=x[0],B=x[1],M=void 0!==t?function(){return t().document.body}:void 0,T=c.a.useState(null),E=Object(s.a)(T,2),W=E[0],J=E[1],z=Object(n.useState)(!1),G=Object(s.a)(z,2),V=G[0],q=G[1];Object(n.useEffect)((function(){return u.collection("users").doc(a).onSnapshot((function(e){j(e.data()),localStorage.setItem("userDetails",JSON.stringify(e.data()))})),function(){j([])}}),[a]);var H=function(){B(!F)},K=function(){O(!g)},Y=function(){q(!V)},Q=d&&Object(p.jsxs)("div",{className:i.side_toolBar,children:[Object(p.jsxs)(v.a,{className:i.header,children:[Object(p.jsx)(r.a,{variant:"h6",className:i.sideToolBarText,children:d.displayName}),Object(p.jsx)(y.a,{alt:d.name,src:d.imgURL})]}),Object(p.jsx)(N.a,{}),Object(p.jsx)(te,{user:a}),Object(p.jsx)(N.a,{})]});return d?Object(p.jsx)("div",{className:i.root,children:Object(p.jsxs)(ie.a,{basename:"/",children:[Object(p.jsx)(S.a,{}),Object(p.jsx)(C.a,{anchorOrigin:{vertical:"top",horizontal:"center"},open:V,onClose:Y,TransitionComponent:k.a,message:"Display Name Updated Successfully",action:Object(p.jsx)(w.a,{"aria-label":"close",color:"inherit",onClick:Y,children:Object(p.jsx)(ce.a,{})})},k.a),g?Object(p.jsx)(ae,{toggle:K,alert:Y}):null,Object(p.jsx)(I.a,{position:"fixed",className:i.appBar,children:Object(p.jsxs)(v.a,{className:i.toolbar,children:[Object(p.jsx)(w.a,{color:"inherit","aria-label":"open drawer",edge:"start",onClick:H,className:i.menuButton,children:Object(p.jsx)(P.a,{})}),Object(p.jsxs)("div",{className:i.header,children:[Object(p.jsx)("img",{src:R,alt:"logo",className:i.logo}),Object(p.jsx)(w.a,{onClick:function(e){J(e.currentTarget)},children:Object(p.jsx)(y.a,{alt:d.name,src:d.imgURL})}),Object(p.jsxs)(D.a,{id:"simple-menu",anchorEl:W,keepMounted:!0,open:Boolean(W),onClose:function(){J(null)},className:i.menu,children:[Object(p.jsx)(L.a,{onClick:K,children:"Edit Profile"}),Object(p.jsx)(L.a,{onClick:function(){b.signOut().then((function(){console.log("signed out"),localStorage.clear()})).catch((function(e){console.log(e)}))},children:"Logout"})]})]})]})}),Object(p.jsxs)("nav",{className:i.drawer,"aria-label":"chat room folders",children:[Object(p.jsx)(U.a,{smUp:!0,implementation:"css",children:Object(p.jsx)(_.a,{container:M,variant:"temporary",anchor:"rtl"===A.direction?"right":"left",open:F,onClose:H,classes:{paper:i.drawerPaper},ModalProps:{keepMounted:!0},children:Q})}),Object(p.jsx)(U.a,{xsDown:!0,implementation:"css",children:Object(p.jsx)(_.a,{classes:{paper:i.drawerPaper},variant:"permanent",open:!0,children:Q})})]}),Object(p.jsx)("main",{className:i.content,children:Object(p.jsxs)(X.c,{children:[Object(p.jsx)(X.a,{path:"/",exact:!0,children:Object(p.jsx)(be,{user:a})}),Object(p.jsx)(X.a,{path:"/channel/:id",children:Object(p.jsx)(Re,{})}),Object(p.jsx)(X.a,{path:"/join/:id",children:Object(p.jsx)(Be,{})})]})})]})}):Object(p.jsx)(p.Fragment,{children:"Loading..."})};var Ee=function(){var e=Object(n.useState)(null),t=Object(s.a)(e,2),a=t[0],c=t[1];return Object(n.useEffect)((function(){b.onAuthStateChanged((function(e){e?(u.collection("users").doc(e.uid).get().then((function(t){if(t.exists)console.log("user already exists.");else{var a={name:e.displayName,displayName:e.displayName.split(" ")[0],imgURL:e.photoURL,email:e.email,uid:e.uid,channels:[]};u.collection("users").doc(e.uid).set(a).then((function(e){console.log("new user created")})).catch((function(e){console.log(e)}))}})).catch((function(e){console.log(e)})),c(e.uid)):c(null)}))}),[]),Object(p.jsx)("div",{className:"App",children:a?Object(p.jsx)(Te,{uid:a}):Object(p.jsx)(f,{})})},We=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,209)).then((function(t){var a=t.getCLS,n=t.getFID,c=t.getFCP,i=t.getLCP,o=t.getTTFB;a(e),n(e),c(e),i(e),o(e)}))},Je=a(201);o.a.render(Object(p.jsxs)(Je.a,{theme:A,children:[Object(p.jsx)(S.a,{}),Object(p.jsx)(Ee,{})]}),document.getElementById("root")),We()}},[[137,1,2]]]);
//# sourceMappingURL=main.3683a7ed.chunk.js.map